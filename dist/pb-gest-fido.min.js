/*! pb-gest-fido 0.2.0 - Copyright 2015 Palmabit <hello@palmabit.com> (http://www.palmabit.com) */
"use strict";function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),PbFido=function(){function a(b){_classCallCheck(this,a),this.fido=b}return _createClass(a,[{key:"getFido",value:function(){return this.fido}},{key:"setFido",value:function(a){return this.fido=a,this}},{key:"responseInvalid",value:function(){return{valid:!1,warning:!1}}},{key:"responseValid",value:function(){return{valid:!0,warning:!1}}},{key:"responseWarning",value:function(){return{valid:!1,warning:!0}}},{key:"isValid",value:function(a){return this.fido&&0!==this.fido.amount?this.fido.not_payed>=this.fido.amount?this.responseInvalid():this.fido.open>=this.fido.max_open?this.responseWarning():this.fido.days>=this.fido.max_days?this.responseWarning():a&&a.total_price&&a.total_price.total&&a.total_price.total+this.fido.not_payed>this.fido.amount?this.responseWarning():this.responseValid():this.responseValid()}}]),a}();angular.module("pbGestFido",[]).factory("DocumentFido",["$q",function(a){function b(b,c){var d=a.defer(),e=new PbFido(c),f=e.isValid(b);return f&&f.valid!==!1?f.warning===!0?d.resolve({warning:!0}):d.resolve({warning:!1}):d.reject(),d.promise}return{isValid:b}}]);